<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nacho</title>

    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: "Arial", sans-serif;
            background-color: #02020d;
            color: #fff;
        }

        header {
            background-color: #913c03;
            color: #FFE81F;
            text-align: center;
            padding: 20px;
            position: relative;
        }

        header h1 {
            margin: 0;
            font-size: 3rem;
        }

        header p {
            margin: 0;
            font-size: 1.2rem;
        }

        #nav-link {
            position: absolute;
            right: 20px;
            top: 20px;
            background-color: #2036FB; /* Fondo azul */
            color: white;
            padding: 12px 25px;
            border-radius: 8px; /* Bordes redondeados */
            font-size: 1.2rem;
            text-decoration: none;
            box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.2); /* Sombra para darle profundidad */
            transition: background-color 0.3s, transform 0.3s, box-shadow 0.3s;
        }

        #nav-link:hover {
            background-color: #1020a7; /* Color más oscuro al pasar el ratón */
            transform: scale(1.05); /* Agrandamiento suave */
            box-shadow: 0px 8px 12px rgba(0, 0, 0, 0.3); /* Sombra más pronunciada al pasar el ratón */
        }

        #content {
            text-align: center;
            margin-top: 20px;
            font-size: 1.2rem;
        }

        footer {
            background-color: #913c03;
            color: #FFE81F;
            text-align: center;
            padding: 10px 0;
            position: fixed;
            width: 100%;
            bottom: 0;
        }
    </style>

    <script>
        const idsPermitidos = {
            '1736973519470-978695': 'Nacho',
            'ID312482': 'Miguel',
            'ID440102': 'Héctor',
            'ID980844': 'Pablo Mora',
            'ID445051': 'Manu',
            'ID592217': 'Alberto',
            'ID239849': 'Carlos',
            'ID370576': 'Javier M',
            'ID277357': 'Adrian'
        };

        function generarIdUnico() {
            return 'ID' + Math.floor(Math.random() * 1000000);
        }

        async function verificarAcceso() {
            const contenidoDiv = document.getElementById('content');

            // Llamar a la API para obtener la IP pública
            const response = await fetch('https://api.ipify.org?format=json');
            const data = await response.json();
            const ipUsuario = data.ip;

            contenidoDiv.innerHTML = `<p>Tu dirección IP es: ${ipUsuario}</p>`;

            let sessionId = localStorage.getItem('uniqueId');

            if (!sessionId) {
                sessionId = generarIdUnico();
                localStorage.setItem('uniqueId', sessionId);
            }

            contenidoDiv.innerHTML += `<p>Tu ID único es: ${sessionId}</p>`;

            if (idsPermitidos[sessionId]) {
                const nombreUsuario = idsPermitidos[sessionId];
                contenidoDiv.innerHTML += `<h1>Bienvenido, ${nombreUsuario}. Formas parte de la élite.</h1>`;

                // Mostrar los menús si el ID está permitido
                document.getElementById('hub-menu').style.display = 'block';
                document.getElementById('game-menu').style.display = 'block';

                // Mostrar el botón de navegación al chat
                const navLink = document.getElementById('nav-link');
                navLink.style.display = 'inline-block'; // Mostrar el botón
            } else {
                contenidoDiv.innerHTML += `<h1>Acceso restringido. No eres de la élite.</h1>`;

                document.getElementById('hub-menu').style.display = 'none';
                document.getElementById('game-menu').style.display = 'none';

                const imagenes = ['Imagen1.jpg', 'Imagen2.jpg', 'Imagen3.jpg'];
                const indiceAleatorio = Math.floor(Math.random() * imagenes.length);
                contenidoDiv.innerHTML += `<img src="${imagenes[indiceAleatorio]}" alt="Acceso restringido" class="imagen-restringida">`;

                // Ocultar el botón de navegación al chat
                const navLink = document.getElementById('nav-link');
                navLink.style.display = 'none';
            }
        }

        window.onload = verificarAcceso;
    </script>

</head>

<body>

    <header>
        <h1>"La Élite"</h1>
        <p>Acceso exclusivo para usuarios autorizados.</p>

        <!-- Botón de navegación a la página de chat, solo visible para usuarios permitidos -->
        <a href="chat.html" id="nav-link" style="display: none;">Ir al Chat</a>
    </header>

    <div id="content">Cargando...</div>

    <div id="Nacho">
        <p>"La Élite"</p>
    </div>

    <!-- Menú que aparece si el ID está permitido -->
    <div id="hub-menu" style="display: none;">
        <div id="custom-url">
            <input id="url-input" placeholder="https://example.com" type="url">
            <button id="url-btn" onclick="loadCustomGame()">Custom Url</button>
        </div>
    </div>

    <!-- Mensaje de error -->
    <div id="error-message" class="error-message" style="display: none;"></div>

    <!-- Menú del juego que aparece si el ID está permitido -->
    <div id="game-menu" style="display: none;">
        <ul>
            <li><button id="fullscreen-btn" onclick="toggleFullscreen()">Fullscreen</button></li>
        </ul>

        <div id="game-container">
            <iframe id="game-iframe" style="display: none;"></iframe>
        </div>
        <script src="script.js"></script>
    </div>
    
    <footer>
        <p>© 2025 Todos los derechos reservados.</p>
    </footer>

</body>

</html>
